Type 17:Area[5/2]: parents [main_vector<Area> 20]
    height:short<0,true>[0]
    terrain:byte<0,true>[2]
    water:byte<0,true>[3]
    direction:byte<0,true>[4]

Type 18:short<0,true>[2/2]:Short(0, true)

Type 19:byte<0,true>[1/1]:Byte(0, true)

Type 20:main_vector<Area>[4/4]:
    vector:vector<Area>[0]

Type 21:vector<Area>[4/4]:Vector(17)

fn n_main() {#block(1):void
  __ref_1(1):ref(main_vector<Area>) = null;
  __work_2(1):text = "";
  __work_1(1):text = "";
  [9] OpDatabase(__ref_1(1), 20i32);
  map(1):vector<ref(Area)>["__ref_1"] = OpGetField(__ref_1(1), 0i32, 21i32);
  OpSetInt(__ref_1(1), 0i32, 0i32);
  _elm_1(1):ref(Area)["map"] = OpNewRecord(map(1), 21i32, 65535i32);
  OpSetShort(_elm_1(1), 0i32, 0i32, 0i32);
  OpSetByte(_elm_1(1), 2i32, 0i32, 1i32);
  OpSetByte(_elm_1(1), 3i32, 0i32, 1i32);
  OpSetByte(_elm_1(1), 4i32, 0i32, 1i32);
  OpFinishRecord(map(1), _elm_1(1), 21i32, 65535i32);
  OpAppendCopy(map(1), 16i32, 21i32);
  [10] if OpEqText({#Formatted string(2):text["__work_1"]
    __work_1(1):text = "";
    OpFormatDatabase(__work_1(1), OpGetVector(map(1), 5i32, 3i32), 17i32, false);
    __work_1(1);
  }#Formatted string(2):text["__work_1"], "{height:0,terrain:1,water:1,direction:1}") null else OpPanic({#Formatted string(3):text["__work_2"]
    __work_2(1):text = "record ";
    OpFormatDatabase(__work_2(1), OpGetVector(map(1), 5i32, 3i32), 17i32, false);
    __work_2(1);
  }#Formatted string(3):text["__work_2"]);
  OpFreeRef(__ref_1(1));
  OpFreeText(__work_1(1));
  OpFreeText(__work_2(1));
}#block(1):void

byte-code for tests/suite/08-struct.lav:n_main()
   0[0]: return-address

