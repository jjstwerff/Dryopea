pub fn test() {
    test_value = {"{file("example").files()}"};
    assert(
        test_value == "[{{path:\"example/config\",size:4096,dir:true}},{{path:\"example/map.png\",size:3406,dir:false}},{{path:\"example/map.xcf\",size:7817,dir:false}},{{path:\"example/show.lav\",size:371,dir:false}},{{path:\"example/todo.json\",size:1461,dir:false}}]",
        "Test failed {test_value} != \"[{{path:\"example/config\",size:4096,dir:true}},{{path:\"example/map.png\",size:3406,dir:false}},{{path:\"example/map.xcf\",size:7817,dir:false}},{{path:\"example/show.lav\",size:371,dir:false}},{{path:\"example/todo.json\",size:1461,dir:false}}]\""
    );
}
fn n_test() {#block(1):void
  __ref_2(1):vector<ref(File)> = null;
  __ref_1(1):ref(File) = null;
  __work_2(1):text = "";
  __work_1(1):text = "";
  [2] test_value(1):text["__work_1"] = {#block(2):text["__work_1"]
    {#Formatted string(3):text["__work_1"]
      __work_1(1):text = "";
      OpFormatDatabase(__work_1(1), t_4File_files(n_file("example", __ref_1(1)), __ref_2(1)), 17i32, 0i32);
      __work_1(1);
    }#Formatted string(3):text["__work_1"];
  }#block(2):text["__work_1"];
  [3] if OpEqText(test_value(1), "[{path:"example/config",size:4096,dir:true},{path:"example/map.png",size:3406,dir:false},{path:"example/map.xcf",size:7817,dir:false},{path:"example/show.lav",size:371,dir:false},{path:"example/todo.json",size:1461,dir:false}]") null else OpPanic({#Formatted string(4):text["__work_2"]
    __work_2(1):text = "Test failed ";
    OpFormatText(__work_2(1), test_value(1), 0i32, -1i32, 32i32);
    OpAppendText(__work_2(1), " != "[{path:"example/config",size:4096,dir:true},{path:"example/map.png",size:3406,dir:false},{path:"example/map.xcf",size:7817,dir:false},{path:"example/show.lav",size:371,dir:false},{path:"example/todo.json",size:1461,dir:false}]"");
    __work_2(1);
  }#Formatted string(4):text["__work_2"]);
  OpFreeText(test_value(1));
  OpFreeText(__work_1(1));
  OpFreeRef(__ref_1(1));
  OpFreeRef(__ref_2(1));
  OpFreeText(__work_2(1));
}#block(1):void

byte-code for files:n_test()
   0[0]: return-address
   0[4]: ConvRefFromNull() -> ref(reference) var=__ref_2[4]:vector<ref(File)>
   1[16]: Database(var[4], db_tp=16)
   6[16]: VarRef(var[4]) -> ref(reference)
   9[28]: ConstInt(val=0) -> integer
  14[32]: SetInt(v1: ref(reference), fld=4, val: integer)
  17[16]: CreateStack(var[4]) -> ref(reference)
  20[28]: ConstInt(val=12) -> integer
  25[32]: SetByte(v1: ref(reference), fld=4, min=0, val: integer)
  30[16]: ConvRefFromNull() -> ref(reference) var=__ref_1[16]:ref(File)
  31[28]: Text() var=__work_2[28]:text
  32[52]: Text() var=__work_1[52]:text
  33[76]: [2] Text() var=test_value[76]:text["__work_1"]
  34[100]: ClearText(var[52]) var=__work_1[52]:text
  37[100]: ConstText(_value="") -> text
  39[116]: ConstText(_value="example") -> text
  48[132]: VarRef(var[16]) -> ref(reference) type=File 14 var=__ref_1[16]:ref(File)
  51[144]: Call(size=0, fn=n_file)
  58[128]: VarVector(var[4]) -> vector type=vector<File> 17 var=__ref_2[4]:vector<ref(File)>
  61[140]: Call(size=0, fn=t_4File_files)
  68[128]: FormatDatabase(var[52], val: ref(reference), db_tp=17, db_format=0)
  74[116]: VarText(var[52]) -> text var=__work_1[52]:text
  77[132]: FreeStack(value=16, discard=32)
  81[116]: AppendText(var[76], v1: text)
  84[100]: [3] VarText(var[76]) -> text var=test_value[76]:text["__work_1"]
  87[116]: ConstText(_value="[{path:"example/config",size:4096,dir:true},{path:"example/map.png",size:3406,dir:false},{path:"example/map.xcf",size:7817,dir:false},{path:"example/show.lav",size:371,dir:false},{path:"example/todo.json",size:1461,dir:false}]") -> text
 315[132]: EqText(v1: text, v2: text) -> boolean
 316[101]: GotoFalseWord(jump=322, if_false: boolean)
 319[100]: GotoWord(jump=596)
 322[100]: ClearText(var[28]) var=__work_2[28]:text
 325[100]: ConstText(_value="Test failed ") -> text
 339[116]: AppendText(var[28], v1: text)
 342[100]: VarText(var[76]) -> text var=test_value[76]:text["__work_1"]
 345[116]: ConstInt(val=0) -> integer
 350[120]: FormatText(var[28], val: text, width: integer, dir=-1, token=32)
 355[100]: ConstText(_value=" != "[{path:"example/config",size:4096,dir:true},{path:"example/map.png",size:3406,dir:false},{path:"example/map.xcf",size:7817,dir:false},{path:"example/show.lav",size:371,dir:false},{path:"example/todo.json",size:1461,dir:false}]"") -> text
 589[116]: AppendText(var[28], v1: text)
 592[100]: VarText(var[28]) -> text var=__work_2[28]:text
 595[116]: Panic(message: text)
 596[100]: FreeText(var[76])
 599[100]: FreeText(var[52])
 602[100]: VarRef(var[16]) -> ref(reference) type=File 14 var=__ref_1[16]:ref(File)
 605[112]: FreeRef(v1: ref(reference))
 606[100]: VarVector(var[4]) -> vector type=vector<File> 17 var=__ref_2[4]:vector<ref(File)>
 609[112]: FreeRef(v1: ref(reference))
 610[100]: FreeText(var[28])
 613[100]: Return(ret=0, value=0, discard=100)

Execute test:
    0:[8] ConvRefFromNull() -> ref(1,0,8)[8]
    1:[20] Database(var[8], db_tp=16)
    6:[20] VarRef(var[8]) -> ref(1,1,8)[20]
    9:[32] ConstInt(val=0) -> 0[32]
   14:[36] SetInt(v1=ref(1,1,8)[20], fld=4, val=0[32])
   17:[20] CreateStack(var[8]) -> ref(0,1,16)[20]
   20:[32] ConstInt(val=12) -> 12[32]
   25:[36] SetByte(v1=ref(0,1,16)[20], fld=4, min=0, val=12[32])
   30:[20] ConvRefFromNull() -> ref(2,0,8)[20]
   31:[32] Text()
   32:[56] [2] Text()
   33:[80] Text()
   34:[104] ClearText(var[56])
   37:[104] ConstText(_value="") -> ""[104]
   39:[120] ConstText(_value="example") -> "example"[120]
   48:[136] VarRef(var[20]) -> ref(2,0,8)=null[136]
   51:[148] Call(size=0, fn=n_file)
 1474:[152] Database(var[136], db_tp=14)
 1479:[152] VarRef(var[136]) -> ref(2,1,8)={}[152]
 1482:[164] ArgText(var[120]) -> "example"[164]
 1485:[180] SetText(v1=ref(2,1,8)[152], fld=8, val="example"[164])
 1488:[152] VarRef(var[136]) -> ref(2,1,8)={path:"example"}[152]
 1491:[164] ConvIntFromNull() -> -2147483648[164]
 1492:[168] SetInt(v1=ref(2,1,8)[152], fld=12, val=-2147483648[164])
 1495:[152] VarRef(var[136]) -> ref(2,1,8)={path:"example"}[152]
 1498:[164] ConstLong(val=0) -> 0[164]
 1507:[172] SetLong(v1=ref(2,1,8)[152], fld=0, val=0[164])
 1510:[152] VarRef(var[136]) -> ref(2,1,8)={path:"example",size:0}[152]
 1513:[164] ConstEnum(val=0) -> null(0)[164]
 1515:[165] SetEnum(v1=ref(2,1,8)[152], fld=16, val=0[164])
 1518:[152] VarRef(var[136]) -> ref(2,1,8)={path:"example",size:0}[152]
 1521:[164] GetFile(file=ref(2,1,8)={path:"example",size:0}[152]) -> true[152]
 1522:[153] FreeStack(value=0, discard=1)
 1526:[152] VarRef(var[136]) -> ref(2,1,8)={path:"example",size:4096,format:Directory}[152]
 1529:[164] Return(ret=1897[148], value=12, discard=44) -> ref(2,1,8)={path:"example",size:4096,format:Directory}[120]
   58:[132] VarVector(var[8]) -> ref(1,1,12)=[][132]
   61:[144] Call(size=0, fn=t_4File_files)
 1535:[148] VarVector(var[132]) -> ref(1,1,12)=[][148]
 1538:[160] [148] ClearVector(r=ref(1,1,12)[148])
 1539:[148] VarRef(var[120]) -> ref(2,1,8)={path:"example",size:4096,format:Directory}[148]
 1542:[160] GetEnum(v1=ref(2,1,8)[148], fld=16) -> null(4)[148]
 1545:[149] ConvIntFromEnum(v1=4[148]) -> 4[148]
 1546:[152] ConvIntFromEnum(v1=0[151]) -> 0[151]
 1547:[155] EqInt(v1=1024[147], v2=0[151]) -> false[147]
 1548:[148] GotoFalseWord(jump=1565, if_false=false[147])
 1565:[147] VarVector(var[132]) -> ref(1,1,12)=[][147]
 1568:[159] Return(ret=16779123[144], value=12, discard=39) -> ref(1,1,12)=[][120]
