Type 7:vector<text>[4/4]:Vector(5)

Type 8:Format[1/1]: parents [File 14]
    TextFile
    LittleEndian
    BigEndian
    Directory

Type 9:EnvVariable[8/4]:
    name:text[0]
    value:text[4]

Type 10:Pixel[3/1]: parents [Image 12]
    r:byte[0]
    g:byte[1]
    b:byte[2]

Type 11:byte[1/1]:Byte(0, false)

Type 12:Image[16/4]:
    name:text[0]
    width:integer[4]
    height:integer[8]
    data:vector<Pixel>[12]

Type 13:vector<Pixel>[4/4]:Vector(10)

Type 14:File[17/8]: parents [main_vector<File> 16]
    path:text[8]
    size:long[0]
    format:Format[16]
    ref:integer[12]

Type 15:main_vector<text>[4/4]:
    vector:vector<text>[0]

Type 16:main_vector<File>[4/4]:
    vector:vector<File>[0]

Type 17:vector<File>[4/4]:Vector(14)

fn t_5Pixel_value(self:Pixel) -> integer {#block(1):integer
  [58] OpAddInt(OpAddInt(OpMulInt(OpGetByte(self(0), 0i32, 0i32), 65536i32), OpMulInt(OpGetByte(self(0), 1i32, 0i32), 256i32)), OpGetByte(self(0), 2i32, 0i32));
}#block(1):integer

fn t_4File_toLittleEndian(self:File) {#block(1):void
  __work_1(1):text = "";
  [62] if OpEqInt(OpConvIntFromEnum(OpGetEnum(self(0), 16i32)), OpConvIntFromEnum(null)) {#block(2):void
    [63] OpSetEnum(self(0), 16i32, OpGetEnum(self(0), 16i32));
  }#block(2):void else {#block(3):void
    [65] n_panic({#Formatted string(4):text["__work_1"]
      __work_1(1):text = "Cannot set '";
      OpFormatText(__work_1(1), OpGetText(self(0), 8i32), 0i32, -1i32, 32i32);
      OpAppendText(__work_1(1), "' to little endian binary.");
      __work_1(1);
    }#Formatted string(4):text["__work_1"]);
  }#block(3):void;
  OpFreeText(__work_1(1));
}#block(1):void

fn t_4File_toBigEndian(self:File) {#block(1):void
  __work_1(1):text = "";
  [70] if OpEqInt(OpConvIntFromEnum(OpGetEnum(self(0), 16i32)), OpConvIntFromEnum(null)) {#block(2):void
    [71] OpSetEnum(self(0), 16i32, OpGetEnum(self(0), 16i32));
  }#block(2):void else {#block(3):void
    [73] n_panic({#Formatted string(4):text["__work_1"]
      __work_1(1):text = "Cannot set '";
      OpFormatText(__work_1(1), OpGetText(self(0), 8i32), 0i32, -1i32, 32i32);
      OpAppendText(__work_1(1), "' to big endian binary.");
      __work_1(1);
    }#Formatted string(4):text["__work_1"]);
  }#block(3):void;
  OpFreeText(__work_1(1));
}#block(1):void

fn t_4File_write_bin(self:File, v:reference) {#block(1):void
  __work_1(1):text = "";
  [78] if if OpEqInt(OpConvIntFromEnum(OpGetEnum(self(0), 16i32)), OpConvIntFromEnum(null)) true else OpEqInt(OpConvIntFromEnum(OpGetEnum(self(0), 16i32)), OpConvIntFromEnum(null)) {#block(2):void
    [79] OpWriteFile(self(0), v(0), 65535i32);
  }#block(2):void else {#block(3):void
    [81] n_panic({#Formatted string(4):text["__work_1"]
      __work_1(1):text = "Set file '";
      OpFormatText(__work_1(1), OpGetText(self(0), 8i32), 0i32, -1i32, 32i32);
      OpAppendText(__work_1(1), "' to binary format first.");
      __work_1(1);
    }#Formatted string(4):text["__work_1"]);
  }#block(3):void;
  OpFreeText(__work_1(1));
}#block(1):void

fn t_4File_read(self:File, v:reference) {#block(1):void
  __work_1(1):text = "";
  [86] if if OpEqInt(OpConvIntFromEnum(OpGetEnum(self(0), 16i32)), OpConvIntFromEnum(null)) true else OpEqInt(OpConvIntFromEnum(OpGetEnum(self(0), 16i32)), OpConvIntFromEnum(null)) {#block(2):void
    [87] OpReadFile(self(0), v(0), 65535i32);
  }#block(2):void else {#block(3):void
    [89] n_panic({#Formatted string(4):text["__work_1"]
      __work_1(1):text = "Set file '";
      OpFormatText(__work_1(1), OpGetText(self(0), 8i32), 0i32, -1i32, 32i32);
      OpAppendText(__work_1(1), "' to binary format first.");
      __work_1(1);
    }#Formatted string(4):text["__work_1"]);
  }#block(3):void;
  OpFreeText(__work_1(1));
}#block(1):void

fn t_4File_seek(self:File, pos:long) {#block(1):void
  __work_1(1):text = "";
  [94] if if OpEqInt(OpConvIntFromEnum(OpGetEnum(self(0), 16i32)), OpConvIntFromEnum(null)) true else OpEqInt(OpConvIntFromEnum(OpGetEnum(self(0), 16i32)), OpConvIntFromEnum(null)) {#block(2):void
    [95] OpSeekFile(self(0), pos(0));
  }#block(2):void else {#block(3):void
    [97] n_panic({#Formatted string(4):text["__work_1"]
      __work_1(1):text = "Set file '";
      OpFormatText(__work_1(1), OpGetText(self(0), 8i32), 0i32, -1i32, 32i32);
      OpAppendText(__work_1(1), "' to binary format first.");
      __work_1(1);
    }#Formatted string(4):text["__work_1"]);
  }#block(3):void;
  OpFreeText(__work_1(1));
}#block(1):void

fn t_4File_content(self:File, result:&text) -> text["result"] {#block(1):text["result"]
  [102] result(0):&text = "";
  [103] txt(1):text = "";
  [104] OpGetFileText(self(0), OpCreateStack(txt(1)));
  [105] OpAppendStackText(result(0), txt(1));
  [106] OpFreeText(txt(1));
  result(0);
}#block(1):text["result"]

fn t_4File_lines(self:File, result:vector<text>) -> vector<text>["??"] {#block(1):vector<text>["result"]
  __work_1(1):text = "";
  [110] OpClearVector(result(0));
  [111] c(1):text = t_4File_content(self(0), {#default ref(2):ref(reference)["__work_1"]
    OpCreateStack(__work_1(1));
  }#default ref(2):ref(reference)["__work_1"]);
  [112] p(1):integer = 0i32;
  [113] {#For block(3):void
    ch#index(3):integer = 0i32;
    loop {#For loop_4
      ch(4):character = {#for text next(5):character
        _for_result_1(5):character = OpTextCharacter(c(1), ch#index(3));
        ch#index(3):integer = OpAddInt(ch#index(3), OpLengthCharacter(_for_result_1(5)));
        _for_result_1(5);
      }#for text next(5):character;
      if OpNot(OpConvBoolFromCharacter(ch(4))) {#break(6):void
        break(0);
      }#break(6):void else null;
      {#block(7):void
        [114] if OpEqInt(OpConvIntFromCharacter(ch(4)), OpConvIntFromCharacter(10i32)) {#block(8):void
          [115] _elm_2(8):ref(boolean)["result"] = OpNewRecord(result(0), 7i32, 65535i32);
          OpSetText(_elm_2(8), 0i32, OpGetTextSub(c(1), p(1), OpMinInt(ch#index(3), 1i32)));
          OpFinishRecord(result(0), _elm_2(8), 7i32, 65535i32);
          [116] p(1):integer = ch#index(3);
        }#block(8):void else null;
      }#block(7):void;
    }#For loop_4;
  }#For block(3):void;
  [119] if OpLtInt(0i32, p(1)) {#block(9):void
    [120] _elm_3(9):ref(boolean)["result"] = OpNewRecord(result(0), 7i32, 65535i32);
    OpSetText(_elm_3(9), 0i32, OpGetTextSub(c(1), p(1), t_4text_len(c(1))));
    OpFinishRecord(result(0), _elm_3(9), 7i32, 65535i32);
  }#block(9):void else null;
  [122] OpFreeText(c(1));
  OpFreeText(__work_1(1));
  result(0);
}#block(1):vector<text>["result"]

fn t_4text_split(self:text, separator:character, result:vector<text>) -> vector<text>["??"] {#block(1):vector<text>["result"]
  [126] OpClearVector(result(0));
  [127] p(1):integer = 0i32;
  [128] {#For block(2):void
    c#index(2):integer = 0i32;
    loop {#For loop_3
      c(3):character = {#for text next(4):character
        _for_result_1(4):character = OpTextCharacter(self(0), c#index(2));
        c#index(2):integer = OpAddInt(c#index(2), OpLengthCharacter(_for_result_1(4)));
        _for_result_1(4);
      }#for text next(4):character;
      if OpNot(OpConvBoolFromCharacter(c(3))) {#break(5):void
        break(0);
      }#break(5):void else null;
      {#block(6):void
        [129] if OpEqInt(OpConvIntFromCharacter(c(3)), OpConvIntFromCharacter(separator(0))) {#block(7):void
          [130] _elm_2(7):ref(boolean)["result"] = OpNewRecord(result(0), 7i32, 65535i32);
          OpSetText(_elm_2(7), 0i32, OpGetTextSub(self(0), p(1), OpMinInt(c#index(2), 1i32)));
          OpFinishRecord(result(0), _elm_2(7), 7i32, 65535i32);
          [131] p(1):integer = c#index(2);
        }#block(7):void else null;
      }#block(6):void;
    }#For loop_3;
  }#For block(2):void;
  [134] if OpLtInt(0i32, p(1)) {#block(8):void
    [135] _elm_3(8):ref(boolean)["result"] = OpNewRecord(result(0), 7i32, 65535i32);
    OpSetText(_elm_3(8), 0i32, OpGetTextSub(self(0), p(1), t_4text_len(self(0))));
    OpFinishRecord(result(0), _elm_3(8), 7i32, 65535i32);
  }#block(8):void else null;
  [137] result(0);
}#block(1):vector<text>["result"]

fn n_file(path:text, result:File) -> File["result"] {#block(1):ref(File)["result"]
  [141] OpDatabase(result(0), 14i32);
  OpSetText(result(0), 8i32, path(0));
  OpSetInt(result(0), 12i32, OpConvIntFromNull());
  OpSetLong(result(0), 0i32, 0i64);
  OpSetEnum(result(0), 16i32, 0u8(8));
  [142] drop OpGetFile(result(0));
  [143] result(0);
}#block(1):ref(File)["result"]

fn t_4File_files(self:File, result:vector<ref(File)>) -> vector<ref(File)>["??"] {#block(1):vector<ref(File)>["result"]
  [147] OpClearVector(result(0));
  [148] if OpEqInt(OpConvIntFromEnum(OpGetEnum(self(0), 16i32)), OpConvIntFromEnum(null)) {#block(2):void
    [149] drop OpGetDir(OpGetText(self(0), 8i32), result(0));
  }#block(2):void else null;
  [151] result(0);
}#block(1):vector<ref(File)>["result"]

fn t_4File_png(self:File, result:Image) -> Image["result"] {#block(1):ref(Image)["result"]
  [158] if OpEqInt(OpConvIntFromEnum(OpGetEnum(self(0), 16i32)), OpConvIntFromEnum(null)) {#block(2):ref(Image)["result"]
    [159] OpDatabase(result(0), 12i32);
    OpSetText(result(0), 0i32, "");
    OpSetInt(result(0), 4i32, 0i32);
    OpSetInt(result(0), 8i32, 0i32);
    OpSetInt(result(0), 12i32, 0i32);
    [160] drop OpGetPngImage(OpGetText(self(0), 8i32), result(0));
    [161] result(0);
  }#block(2):ref(Image)["result"] else {#block(3):ref(Image)["result"]
    [163] OpConvRefFromNull();
  }#block(3):ref(Image)["result"];
}#block(1):ref(Image)["result"]

